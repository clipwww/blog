(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{431:function(e,t,i){"use strict";i.r(t);var l=i(3),d=i(406),s=i.n(d),n=Object(l.c)({setup(){const e=Object(l.g)({videoEl:null,canvasEl:null,trEl:null,tlEl:null,brEl:null,blEl:null,videoWidth:0,videoHeight:0,scanned:!1,qrcode:null,result:""});function t(){if(e.scanned=!1,!e.canvasEl||!e.videoEl)return;const{videoWidth:t,videoHeight:i}=e.videoEl,l=t/window.innerWidth;e.videoWidth=window.innerWidth,e.videoHeight=i/l;window.innerHeight,e.videoHeight;const d=e.canvasEl.getContext("2d");if(!d)return;null==d||d.drawImage(e.videoEl,0,0,e.videoWidth,e.videoHeight);const{data:n,width:a,height:o}=null==d?void 0:d.getImageData(0,0,e.videoWidth,e.videoHeight);if(!n)return;const r=s()(n,a,o);r&&(e.scanned=!0,e.qrcode=r,e.result=e.qrcode.data)}return Object(l.e)(()=>{!async function(){try{if(!e.videoEl)return;const i=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});e.videoEl.srcObject=i,console.log(e.videoEl.srcObject),e.videoEl.addEventListener("timeupdate",t)}catch(e){alert(e.message)}}()}),Object(l.d)(()=>{e.videoEl.srcObject.getTracks().forEach(e=>{e.stop()})}),{...Object(l.i)(e)}}}),a=i(4),o=Object(a.a)(n,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"relative"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"result"}],staticClass:"w-full text-lg",domProps:{value:e.result},on:{input:function(t){t.target.composing||(e.result=t.target.value)}}}),e._v(" "),t("div",{staticClass:"absolute top-0 left-0 z-1 flex items-center justify-center w-full h-full"},[t("div",{staticClass:"border-4 border-solid rounded w-64 h-64",class:{"border-red-400":e.scanned}})]),e._v(" "),t("video",{ref:"videoEl",staticClass:"w-full h-full bg-black",attrs:{id:"js-video",autoplay:"true"}}),e._v(" "),t("canvas",{ref:"canvasEl",staticClass:"bg-black hidden",attrs:{id:"js-canvas",width:e.videoWidth,height:e.videoHeight}})])}),[],!1,null,"3000d9ff",null);t.default=o.exports}}]);